

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>getgfs package &mdash; getgfs 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to getgfs" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> getgfs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">getgfs package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-getgfs.decode">getgfs.decode module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-getgfs.getgfs">getgfs.getgfs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-getgfs.test">getgfs.test module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-getgfs">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">getgfs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>getgfs package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/getgfs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getgfs-package">
<h1>getgfs package<a class="headerlink" href="#getgfs-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-getgfs.decode">
<span id="getgfs-decode-module"></span><h2>getgfs.decode module<a class="headerlink" href="#module-getgfs.decode" title="Permalink to this headline">¶</a></h2>
<p>Decodes the downloaded files to extract the variables and their coordinates</p>
<dl class="py class">
<dt id="getgfs.decode.Coordinate">
<em class="property">class </em><code class="sig-prename descclassname">getgfs.decode.</code><code class="sig-name descname">Coordinate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.decode.Coordinate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holds the information and values describing a coordinate</p>
</dd></dl>

<dl class="py class">
<dt id="getgfs.decode.File">
<em class="property">class </em><code class="sig-prename descclassname">getgfs.decode.</code><code class="sig-name descname">File</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.decode.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holds the variables and information from a text file returned by the forecast site</p>
</dd></dl>

<dl class="py class">
<dt id="getgfs.decode.Variable">
<em class="property">class </em><code class="sig-prename descclassname">getgfs.decode.</code><code class="sig-name descname">Variable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.decode.Variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holds the information and data for an extracted variable</p>
</dd></dl>

<dl class="py function">
<dt id="getgfs.decode.replace_val">
<code class="sig-prename descclassname">getgfs.decode.</code><code class="sig-name descname">replace_val</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arr</span></em>, <em class="sig-param"><span class="n">val</span></em>, <em class="sig-param"><span class="n">position</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.decode.replace_val" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts a value into a 1 to 4 dimensional numpy array</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I am sure there are better ways todo this but I couldn’t find any after quite a search</p>
<dl class="simple">
<dt>Args:</dt><dd><p>arr (numpy array): Array to insert into
val (float/int): Value to insert
position (tuple): Coordinate position in array</p>
</dd>
<dt>Raises:</dt><dd><p>TypeError: Position invalid
ValueError: Dimensionality of array too high</p>
</dd>
<dt>Returns:</dt><dd><p>[type]: [description]</p>
</dd>
</dl>
</div>
</dd></dl>

</div>
<div class="section" id="module-getgfs.getgfs">
<span id="getgfs-getgfs-module"></span><h2>getgfs.getgfs module<a class="headerlink" href="#module-getgfs.getgfs" title="Permalink to this headline">¶</a></h2>
<p>getgfs - a library for extracting weather forecast variables from the NOAA GFS forecast in a pure python, no obscure dependencies way</p>
<dl class="py class">
<dt id="getgfs.getgfs.Forecast">
<em class="property">class </em><code class="sig-prename descclassname">getgfs.getgfs.</code><code class="sig-name descname">Forecast</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">resolution</span><span class="o">=</span><span class="default_value">'0p25'</span></em>, <em class="sig-param"><span class="n">timestep</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.Forecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object that can be manipulated to get forecast information</p>
<dl class="py method">
<dt id="getgfs.getgfs.Forecast.datetime_to_forecast">
<code class="sig-name descname">datetime_to_forecast</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date_time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.Forecast.datetime_to_forecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Works out which forecast date/run/time is required for the latest values for a chosen time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date_time</strong> (<em>string</em>) – The date and time of the desired forecast, parser is used so any format is valid e.g. 20210205 11pm</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – The date time requested is not available from the NOAA at this time</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>forecast date
string: forecast run
string: forecast query time (the appropriate timestep within the forecast)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="getgfs.getgfs.Forecast.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">variables</span></em>, <em class="sig-param"><span class="n">date_time</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">lon</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.Forecast.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the latest forecast available for the requested date and time</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>“raw” since you have to put indexes in rather than coordinates and it returns a file object rather than a processed file</p></li>
<li><p>If a variable has level dependance, you get all the levels - it seems extremely hard to impliment otherwise</p></li>
</ul>
<dl class="simple">
<dt>Args:</dt><dd><p>variables (list): list of required variables by short name
date_time (string): datetime requested (parser used so any format fine)
lat (string or number): latitude in the format “[min:max]” or a single value
lon (string or number): longitude in the format “[min:max]” or a single value</p>
</dd>
<dt>Raises:</dt><dd><p>ValueError: Invalid variable choice
ValueError: Level dependance needs to be specified for chosen variable
Exception: Unknown failure to download the file</p>
</dd>
<dt>Returns:</dt><dd><p>File Object: File object with the downloaded variable data (see File documentation)</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt id="getgfs.getgfs.Forecast.get_windprofile">
<code class="sig-name descname">get_windprofile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date_time</span></em>, <em class="sig-param"><span class="n">lat</span></em>, <em class="sig-param"><span class="n">lon</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.Forecast.get_windprofile" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the verticle wind profile for a location. I wrote this since it is what
I require in another program. The U/V compoents of wind with sigma do not go down to
the surface so the surface components are also included as well as a pressure altitude
change of x- variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date_time</strong> (<em>string</em>) – datetime requested (parser used so any format fine)</p></li>
<li><p><strong>lat</strong> (<em>string</em><em> or </em><em>number</em>) – Latitude for data</p></li>
<li><p><strong>lon</strong> (<em>string</em><em> or </em><em>number</em>) – Longitude for data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>U component of wind interpolater by altitude
interpolation object: V component of wind interpolater by altitude</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>interpolation object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="getgfs.getgfs.Forecast.search">
<code class="sig-name descname">search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">variable</span></em>, <em class="sig-param"><span class="n">sensetivity</span><span class="o">=</span><span class="default_value">80</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.Forecast.search" title="Permalink to this definition">¶</a></dt>
<dd><p>The short names of the forecast variables are nonsence so this can be used to find
the short name (used for the rest of the forecast) that you are looking for</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Will not work if fuzzywuzzy is not installed</p>
<dl class="simple">
<dt>Args:</dt><dd><p>variable (string): Search terms for the variable (e.g. U-Component wind)
sensetivity (int, optional): The search sensitivity, for common words a higher sensitivity may be required. Defaults to 80.</p>
</dd>
<dt>Raises:</dt><dd><p>RuntimeError: Fuzzywuzzy not installed</p>
</dd>
<dt>Returns:</dt><dd><p>list: List of possible matches sorted by ratio, short name (what you need) and long name also given</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt id="getgfs.getgfs.Forecast.value_input_to_index">
<code class="sig-name descname">value_input_to_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coord</span></em>, <em class="sig-param"><span class="n">inpt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.Forecast.value_input_to_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns a chosen value of a coordinate/coordinate range to the index in the forecast array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coord</strong> (<em>string</em>) – The short name of the coordinate to convert</p></li>
<li><p><strong>inpt</strong> (<em>float/str</em>) – The value or range requested, for a range a string in the format [min_val:max_val] is required</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – Incorrect inpt format</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Index of coordinate value(s) as the forecast requires it (i.e. within [])</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="getgfs.getgfs.Forecast.value_to_index">
<code class="sig-name descname">value_to_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coord</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.Forecast.value_to_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns a coordinate value into the index in the forecast array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coord</strong> (<em>string</em>) – The short name of the coordinate to convert</p></li>
<li><p><strong>inpt</strong> (<em>float/str</em>) – The value requested</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Index in array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="getgfs.getgfs.extract_line">
<code class="sig-prename descclassname">getgfs.getgfs.</code><code class="sig-name descname">extract_line</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">possibles</span></em>, <em class="sig-param"><span class="n">line</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.extract_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Works out what is being refered to by a line in the das and dds pages for the forecast</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>possibles</strong> (<em>list</em>) – Possible titles</p></li>
<li><p><strong>line</strong> (<em>string</em>) – Line to search</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Index of the attribute</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="getgfs.getgfs.get_attributes">
<code class="sig-prename descclassname">getgfs.getgfs.</code><code class="sig-name descname">get_attributes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">res</span></em>, <em class="sig-param"><span class="n">step</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.get_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the available variables and coordinates for a given forecast</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>str</em><em>, </em><em>optional</em>) – The forecast resulution, choices are 1p00, 0p50 and 0p25. Defaults to “0p25”.</p></li>
<li><p><strong>step</strong> (<em>str</em><em>, </em><em>optional</em>) – The timestep of the forecast to use, most do not have a choice but 0p25 can be 3hr (default) or 1hr. Defaults to “”.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>Exception</strong> – Failed to download the requested resolution and forecast</p></li>
<li><p><strong>RuntimeError</strong> – Failed to download the other attributes</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Time attributes (the number of timesteps and the size of the timesteps)
dict: Coordinates for the forecast with their short name, number of steps, min, max, resolution
dict: Variables with all the information about them</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="getgfs.getgfs.hour_round">
<code class="sig-prename descclassname">getgfs.getgfs.</code><code class="sig-name descname">hour_round</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.getgfs.hour_round" title="Permalink to this definition">¶</a></dt>
<dd><p>Rounds to the nearest hour for a datetime object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> (<em>datetime</em>) – Datetime to round</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Rounded datetime</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-getgfs.test">
<span id="getgfs-test-module"></span><h2>getgfs.test module<a class="headerlink" href="#module-getgfs.test" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="getgfs.test.Decode">
<em class="property">class </em><code class="sig-prename descclassname">getgfs.test.</code><code class="sig-name descname">Decode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">methodName</span><span class="o">=</span><span class="default_value">'runTest'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.test.Decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.case.TestCase</span></code></p>
<dl class="py method">
<dt id="getgfs.test.Decode.test_data">
<code class="sig-name descname">test_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.test.Decode.test_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="getgfs.test.Decode.test_variables">
<code class="sig-name descname">test_variables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.test.Decode.test_variables" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="getgfs.test.TestBasics">
<em class="property">class </em><code class="sig-prename descclassname">getgfs.test.</code><code class="sig-name descname">TestBasics</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">methodName</span><span class="o">=</span><span class="default_value">'runTest'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.test.TestBasics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.case.TestCase</span></code></p>
<dl class="py method">
<dt id="getgfs.test.TestBasics.test_attribute">
<code class="sig-name descname">test_attribute</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.test.TestBasics.test_attribute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="getgfs.test.TestBasics.test_folders">
<code class="sig-name descname">test_folders</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getgfs.test.TestBasics.test_folders" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-getgfs">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-getgfs" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to getgfs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Jago Strong-Wright.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>